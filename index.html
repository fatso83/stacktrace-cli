<script src="stackutils/source-map.js"></script>
<script src="stackutils/stackframe.js"></script>
<script src="stackutils/stacktrace-gps.js"></script>
<script src="stackutils/error-stack-parser.js"></script>
<script src="stackutils/stacktrace.js"></script>
<script>
var stackframe = new StackFrame({fileName: 'http://localhost:8000/nimble-bundle.js', lineNumber: 129, columnNumber: 600036});
//var stackframe = new StackFrame({fileName: 'http://localhost:8000/nimble-bundle.js', lineNumber: 94, columnNumber: 74996});

var callback = function myCallback(foundFunctionName) { console.log('output',foundFunctionName); };

// Such meta. Wow
var errback = function myErrback(error) { console.log('error',StackTrace.fromError(error)); };

var gps = new StackTraceGPS();

// Pinpoint actual function name and source-mapped location
gps.pinpoint(stackframe).then(callback, errback);
//===> Promise(StackFrame({functionName: 'fun', fileName: 'file.js', lineNumber: 203, columnNumber: 9}), Error)

// Better location/name information from source maps
//gps.getMappedLocation(stackframe).then(callback, errback);
//===> Promise(StackFrame({fileName: 'file.js', lineNumber: 203, columnNumber: 9}), Error)

// Get function name from location information
//gps.findFunctionName(stackframe).then(callback, errback);
//===> Promise(StackFrame({functionName: 'fun', fileName: 'http://localhost:3000/file.min.js', lineNumber: 1, columnNumber: 3284}), Error)

